<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Mascarin Consulting</title>
    <link rel="stylesheet" href="./css/admin-dashboard.css?v=21">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Login Screen -->
    <div id="login-screen" class="login-screen">
        <div class="login-card">
            <div class="login-header">
                <h1>üîê Admin Dashboard</h1>
                <p>Mascarin Consulting</p>
            </div>
            <form id="login-form" onsubmit="handleLogin(event); return false;">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" required placeholder="votre@email.com" autocomplete="username">
                </div>
                <div class="form-group">
                    <label>Mot de passe</label>
                    <input type="password" id="login-password" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                        autocomplete="current-password">
                </div>
                <div id="login-error" class="error-message"></div>
                <button type="submit" class="btn-login">Se connecter</button>
            </form>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="dashboard" style="display: none;">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="header-left">
                <h1>üìã Dashboard Admin</h1>
            </div>
            <div class="header-right">
                <span class="user-info">üë§ Christian ABONNEL</span>
                <button onclick="debugBadges()"
                    style="background:orange; color:white; border:none; padding:5px 10px; border-radius:4px; cursor:pointer; margin-right:10px;">üêû
                    Debug</button>
                <button id="logout-btn" class="btn-logout">D√©connexion</button>
            </div>
        </header>

        <div class="dashboard-container">
            <!-- Sidebar -->
            <aside class="sidebar">
                <nav class="sidebar-nav">
                    <a href="#" class="nav-item active" onclick="switchView('overview'); return false;"
                        data-view="overview">
                        <span class="nav-icon">üìä</span>
                        <span>Vue d'ensemble</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('calendar'); return false;" data-view="calendar">
                        <span class="nav-icon">üìÖ</span>
                        <span>Calendrier</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('appointments'); return false;"
                        data-view="appointments">
                        <span class="nav-icon">üìù</span>
                        <span>Rendez-vous</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('clients'); return false;" data-view="clients">
                        <span class="nav-icon">üë•</span>
                        <span>Clients</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('invoices'); return false;" data-view="invoices">
                        <span class="nav-icon">üí∞</span>
                        <span>Factures</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('requests'); return false;" data-view="requests">
                        <span class="nav-icon">üì©</span>
                        <span>Demandes</span>
                        <span id="requests-badge" class="badge" style="display:none">0</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('contacts'); return false;" data-view="contacts">
                        <span class="nav-icon">üí¨</span>
                        <span>Messages</span>
                        <span id="contacts-badge" class="badge" style="display:none">0</span>
                    </a>
                    <a href="#" class="nav-item" onclick="switchView('backup'); return false;" data-view="backup">
                        <span class="nav-icon">üíæ</span>
                        <span>Sauvegarde</span>
                    </a>
                </nav>
            </aside>

            <!-- Main Content Area -->
            <main class="main-content">

                <!-- VIEW: OVERVIEW -->
                <div id="view-overview" class="view active">
                    <header class="view-header">
                        <h2>Vue d'ensemble</h2>
                        <div class="date-display" id="current-date"></div>
                    </header>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìÖ</div>
                            <div>
                                <div class="stat-value" id="stat-total">0</div>
                                <div class="stat-label">Total Rendez-vous</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìç</div>
                            <div>
                                <div class="stat-value" id="stat-today">0</div>
                                <div class="stat-label">Aujourd'hui</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚è≥</div>
                            <div>
                                <div class="stat-value" id="stat-pending">0</div>
                                <div class="stat-label">En attente</div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚úÖ</div>
                            <div>
                                <div class="stat-value" id="stat-completed">0</div>
                                <div class="stat-label">Termin√©s</div>
                            </div>
                        </div>
                    </div>

                    <div class="section-card">
                        <h3>Rendez-vous r√©cents</h3>
                        <div id="recent-appointments" class="appointments-list"></div>
                    </div>
                </div>

                <!-- VIEW: CALENDAR -->
                <div id="view-calendar" class="view">
                    <header class="view-header">
                        <h2>Calendrier</h2>
                        <div class="calendar-controls">
                            <button class="btn-secondary" id="prev-month">&lt;</button>
                            <h3 id="current-month" class="month-label"></h3>
                            <button class="btn-secondary" id="next-month">&gt;</button>
                            <button class="btn-primary" id="today-btn">Aujourd'hui</button>
                        </div>
                    </header>
                    <div id="calendar-container" class="calendar-container"></div>
                </div>

                <!-- VIEW: APPOINTMENTS -->
                <div id="view-appointments" class="view">
                    <header class="view-header">
                        <h2>Gestion des Rendez-vous</h2>
                        <div class="actions">
                            <button class="btn-secondary" onclick="exportAppointments()">üì• Exporter</button>
                            <button class="btn-primary" onclick="showNewAppointmentModal()">+ Nouveau RDV</button>
                        </div>
                    </header>

                    <div class="filter-bar">
                        <div class="search-box" style="flex: 2;">
                            <input type="text" id="search-appointments" placeholder="Rechercher un rendez-vous..."
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                        </div>
                        <div class="filter-group" style="flex: 1;">
                            <select id="status-filter"
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                                <option value="all">Tous les statuts</option>
                                <option value="pending">En attente</option>
                                <option value="confirmed">Confirm√©</option>
                                <option value="completed">Termin√©</option>
                                <option value="cancelled">Annul√©</option>
                            </select>
                        </div>
                    </div>

                    <div class="appointments-table">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr
                                    style="background: var(--bg-main); text-align: left; border-bottom: 1px solid var(--border);">
                                    <th style="padding: 16px;">Client</th>
                                    <th style="padding: 16px;">Contact</th>
                                    <th style="padding: 16px;">Date & Heure</th>
                                    <th style="padding: 16px;">Service</th>
                                    <th style="padding: 16px;">Statut</th>
                                    <th style="padding: 16px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="all-appointments">
                                <!-- JS will populate this -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- VIEW: CLIENTS -->
                <div id="view-clients" class="view">
                    <header class="view-header">
                        <h2>Clients</h2>
                        <button class="btn-primary" onclick="showNewClientModal()">+ Nouveau Client</button>
                    </header>
                    <div class="filter-bar">
                        <div class="search-box" style="flex: 2;">
                            <input type="text" id="search-clients" placeholder="Rechercher un client..."
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                        </div>
                    </div>
                    <div id="clients-list" class="clients-grid"></div>
                </div>

                <!-- VIEW: INVOICES -->
                <div id="view-invoices" class="view">
                    <header class="view-header">
                        <h2>Factures & Devis</h2>
                        <button class="btn-primary" onclick="showNewInvoiceModal()">+ Nouveau Document</button>
                    </header>
                    <div class="filter-bar">
                        <div class="search-box" style="flex: 2;">
                            <input type="text" id="search-invoices" placeholder="Rechercher..."
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                        </div>
                        <div class="filter-group" style="flex: 1;">
                            <select id="invoice-type-filter"
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                                <option value="all">Tout voir</option>
                                <option value="invoice">Factures</option>
                                <option value="quote">Devis</option>
                            </select>
                        </div>
                    </div>
                    <div class="appointments-table">
                        <div id="invoices-list"></div>
                    </div>
                </div>

                <!-- VIEW: REQUESTS -->
                <div id="view-requests" class="view">
                    <header class="view-header">
                        <h2>Demandes de Rendez-vous</h2>
                        <div class="actions">
                            <button class="btn-secondary" onclick="loadRequests()">üîÑ Actualiser</button>
                        </div>
                    </header>
                    <div class="filter-bar">
                        <div class="filter-group" style="flex: 1;">
                            <select id="request-status-filter" onchange="filterRequests()"
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                                <option value="all">Toutes les demandes</option>
                                <option value="pending">En attente</option>
                                <option value="processed">Trait√©es</option>
                                <option value="archived">Archiv√©es</option>
                            </select>
                        </div>
                    </div>
                    <div class="appointments-table">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr
                                    style="background: var(--bg-main); text-align: left; border-bottom: 1px solid var(--border);">
                                    <th style="padding: 16px;">Date demande</th>
                                    <th style="padding: 16px;">Client</th>
                                    <th style="padding: 16px;">Contact</th>
                                    <th style="padding: 16px;">Souhait</th>
                                    <th style="padding: 16px;">Statut</th>
                                    <th style="padding: 16px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="requests-list">
                                <!-- JS will populate this -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- VIEW: CONTACTS -->
                <div id="view-contacts" class="view">
                    <header class="view-header">
                        <h2>Messages de Contact</h2>
                        <div class="actions">
                            <button class="btn-secondary" onclick="loadContacts()">üîÑ Actualiser</button>
                        </div>
                    </header>
                    <div class="filter-bar">
                        <div class="filter-group" style="flex: 1;">
                            <select id="contact-status-filter" onchange="filterContacts()"
                                style="width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px;">
                                <option value="all">Tous les messages</option>
                                <option value="unread">Non lus</option>
                                <option value="read">Lus</option>
                                <option value="archived">Archiv√©s</option>
                            </select>
                        </div>
                    </div>
                    <div class="appointments-table">
                        <table style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr
                                    style="background: var(--bg-main); text-align: left; border-bottom: 1px solid var(--border);">
                                    <th style="padding: 16px;">Date</th>
                                    <th style="padding: 16px;">Nom</th>
                                    <th style="padding: 16px;">Email</th>
                                    <th style="padding: 16px;">Statut</th>
                                    <th style="padding: 16px;">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="contacts-list">
                                <!-- JS will populate this -->

                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- VIEW: BACKUP -->
                <div id="view-backup" class="view">
                    <header class="view-header">
                        <h2>Sauvegarde & Restauration</h2>
                    </header>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üíæ</div>
                            <div>
                                <h3>Sauvegarde</h3>
                                <p style="margin-bottom: 15px; color: var(--text-light);">T√©l√©charger une copie de
                                    toutes les donn√©es</p>
                                <button class="btn-primary" onclick="downloadBackup()">T√©l√©charger Sauvegarde</button>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚ôªÔ∏è</div>
                            <div>
                                <h3>Restauration</h3>
                                <p style="margin-bottom: 15px; color: var(--text-light);">Restaurer les donn√©es depuis
                                    un fichier</p>
                                <input type="file" id="restore-file" accept=".json" style="display: none;"
                                    onchange="handleRestoreFile(this)">
                                <button class="btn-secondary"
                                    onclick="document.getElementById('restore-file').click()">S√©lectionner
                                    Fichier</button>
                                <div style="margin-top: 10px;">
                                    <span id="selected-file-name"
                                        style="font-size: 0.9em; color: var(--text-light);">Aucun
                                        fichier s√©lectionn√©</span>
                                </div>
                                <button id="restore-btn" class="btn-primary"
                                    style="margin-top: 10px; display: none; width: 100%; background-color: #ef4444;"
                                    onclick="performRestore()">‚ö†Ô∏è Restaurer les donn√©es</button>
                            </div>
                        </div>
                    </div>
                </div>

            </main>
        </div>
    </div>

    <!-- Appointment Modal -->
    <div id="appointment-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Nouveau Rendez-vous</h3>
                <button class="modal-close" onclick="closeAppointmentModal()">&times;</button>
            </div>
            <form id="appointment-form">
                <input type="hidden" id="appointment-id">

                <div class="form-group">
                    <label>Client</label>
                    <div style="display: flex; gap: 10px;">
                        <select id="client-select" required style="flex: 1;">
                            <option value="">S√©lectionner un client...</option>
                        </select>
                        <button type="button" class="btn-secondary" onclick="showNewClientModal()"
                            title="Nouveau client">+</button>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Nom du client (si pas dans la liste)</label>
                        <input type="text" id="client-name">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="client-email">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>T√©l√©phone</label>
                        <input type="tel" id="client-phone">
                    </div>
                    <div class="form-group">
                        <label>Lieu</label>
                        <input type="text" id="appointment-location" placeholder="Cabinet, Visio, Domicile...">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Type de service</label>
                        <select id="appointment-type" required>
                            <option value="formation">Formation</option>
                            <option value="conseil">Conseil</option>
                            <option value="audit">Audit</option>
                            <option value="management">Management de transition</option>
                            <option value="autre">Autre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Dur√©e (min)</label>
                        <select id="appointment-duration">
                            <option value="30">30 min</option>
                            <option value="60" selected>1 heure</option>
                            <option value="90">1h30</option>
                            <option value="120">2 heures</option>
                            <option value="180">3 heures</option>
                        </select>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="appointment-date" required>
                    </div>
                    <div class="form-group">
                        <label>Heure</label>
                        <input type="time" id="appointment-time" required>
                    </div>
                </div>

                <div class="form-group">
                    <label>Statut</label>
                    <select id="appointment-status">
                        <option value="pending">En attente</option>
                        <option value="confirmed">Confirm√©</option>
                        <option value="completed">Termin√©</option>
                        <option value="cancelled">Annul√©</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="appointment-notes" rows="3"></textarea>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeAppointmentModal()">Annuler</button>
                    <button type="submit" class="btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Day View Modal -->
    <div id="day-modal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 id="day-modal-title">Rendez-vous du jour</h3>
                <button class="modal-close" onclick="closeDayModal()">&times;</button>
            </div>
            <div style="padding: 24px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h4 style="margin: 0;">Planning de la journ√©e</h4>
                    <button class="btn-primary" onclick="addAppointmentForDay()">+ Ajouter un
                        RDV</button>
                </div>
                <div id="day-appointments-list"></div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmation-modal" class="modal">
        <div class="modal-content" style="max-width: 400px; text-align: center;">
            <div style="margin-bottom: 20px;">
                <div style="font-size: 48px; margin-bottom: 16px;">‚ö†Ô∏è</div>
                <h3 id="confirmation-title" style="margin-bottom: 8px;">Confirmer la suppression</h3>
                <p id="confirmation-message" style="color: var(--text-light);">√ätes-vous s√ªr de vouloir
                    supprimer cet
                    √©l√©ment ?</p>
            </div>
            <div style="display: flex; gap: 12px; justify-content: center;">
                <button class="btn-secondary" onclick="closeConfirmationModal()">Annuler</button>
                <button id="confirm-action-btn" class="btn-primary"
                    style="background-color: #ef4444;">Supprimer</button>
            </div>
        </div>
    </div>

    <!-- Invoice/Quote Modal -->
    <div id="invoice-modal" class="modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h3 id="invoice-modal-title">Nouveau Document</h3>
                <button class="modal-close" onclick="closeInvoiceModal()">&times;</button>
            </div>
            <form id="invoice-form">
                <input type="hidden" id="invoice-id">

                <!-- Header Info -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Type</label>
                        <select id="invoice-type" required onchange="updateInvoiceNumberPrefix()">
                            <option value="invoice">Facture</option>
                            <option value="quote">Devis</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Num√©ro</label>
                        <input type="text" id="invoice-number" required readonly>
                    </div>
                    <div class="form-group">
                        <label>Statut</label>
                        <select id="invoice-status">
                            <option value="draft">Brouillon</option>
                            <option value="sent">Envoy√©</option>
                            <option value="paid">Pay√© / Sign√©</option>
                            <option value="cancelled">Annul√©</option>
                        </select>
                    </div>
                </div>

                <!-- Client Info -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Client</label>
                        <div style="display: flex; gap: 10px;">
                            <select id="invoice-client-select" required style="flex: 1;"
                                onchange="handleInvoiceClientChange()">
                                <option value="">S√©lectionner un client...</option>
                            </select>
                            <button type="button" class="btn-secondary" onclick="showNewClientModal()">+</button>
                        </div>
                        <input type="hidden" id="invoice-client-name">
                    </div>
                    <div class="form-group">
                        <label>Email Client</label>
                        <input type="email" id="invoice-client-email" placeholder="email@client.com" readonly>
                    </div>
                </div>

                <!-- Dates -->
                <div class="form-row">
                    <div class="form-group">
                        <label>Date d'√©mission</label>
                        <input type="date" id="invoice-date" required>
                    </div>
                    <div class="form-group">
                        <label>Date d'√©ch√©ance / Validit√©</label>
                        <input type="date" id="invoice-due-date" required>
                    </div>
                </div>

                <!-- Line Items -->
                <div style="margin: 24px 0;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
                        <h4>Lignes</h4>
                        <button type="button" class="btn-secondary btn-sm" onclick="addInvoiceItem()">+
                            Ajouter une
                            ligne</button>
                    </div>
                    <table style="width: 100%; border-collapse: collapse;">
                        <thead>
                            <tr style="background: var(--bg-main); text-align: left;">
                                <th style="padding: 8px; border-radius: 8px 0 0 8px;">Description
                                </th>
                                <th style="padding: 8px; width: 100px;">Qt√©</th>
                                <th style="padding: 8px; width: 120px;">Prix Unit.</th>
                                <th style="padding: 8px; width: 120px;">Total</th>
                                <th style="padding: 8px; width: 50px; border-radius: 0 8px 8px 0;">
                                </th>
                            </tr>
                        </thead>
                        <tbody id="invoice-items-list">
                            <!-- Items will be injected here -->
                        </tbody>
                    </table>

                    <!-- Totals Section -->
                    <div style="margin-top: 24px; padding: 16px; background: var(--bg-secondary); border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span>Sous-total HT:</span>
                            <span id="invoice-subtotal">0.00 ‚Ç¨</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span>TVA (8,5%):</span>
                            <span id="invoice-tva">0.00 ‚Ç¨</span>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; font-size: 1.2em; font-weight: bold; padding-top: 8px; border-top: 2px solid var(--border);">
                            <span>Total TTC:</span>
                            <span id="invoice-total">0.00 ‚Ç¨</span>
                        </div>
                    </div>
                </div>

                <!-- Notes Section -->
                <div class="form-group">
                    <label>Notes / Conditions</label>
                    <textarea id="invoice-notes" rows="3"></textarea>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeInvoiceModal()">Annuler</button>
                    <button type="submit" class="btn-primary">Enregistrer</button>
                    <button type="button" class="btn-secondary" onclick="printInvoice()">üñ®Ô∏è Imprimer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Client Modal -->
    <div id="client-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="client-modal-title">Nouveau Client</h3>
                <button class="modal-close" onclick="closeClientModal()">&times;</button>
            </div>
            <form id="client-form">
                <input type="hidden" id="client-id">
                <div class="form-group">
                    <label>Nom du client *</label>
                    <input type="text" id="client-form-name" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="client-form-email">
                    </div>
                    <div class="form-group">
                        <label>T√©l√©phone</label>
                        <input type="tel" id="client-form-phone">
                    </div>
                </div>
                <div class="form-group">
                    <label>Adresse</label>
                    <textarea id="client-form-address" rows="2"></textarea>
                </div>
                <div class="form-group">
                    <label>Notes</label>
                    <textarea id="client-form-notes" rows="3"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn-secondary" onclick="closeClientModal()">Annuler</button>
                    <button type="submit" class="btn-primary">Enregistrer</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Restore Confirmation Modal -->
    <div id="restore-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Confirmation de restauration</h3>
                <button class="modal-close" onclick="closeRestoreModal()">&times;</button>
            </div>
            <div style="padding: 24px;">
                <p>‚ö†Ô∏è <strong>ATTENTION :</strong> Cette action va remplacer TOUTES les donn√©es
                    actuelles par celles
                    de
                    la sauvegarde.</p>
                <p>Les donn√©es suivantes seront restaur√©es :</p>
                <ul style="margin: 10px 0 20px 20px;">
                    <li>Rendez-vous</li>
                    <li>Clients</li>
                    <li>Factures</li>
                    <li>Demandes de rendez-vous</li>
                    <li>Messages de contact</li>
                </ul>
                <p>Cette action est irr√©versible. √ätes-vous s√ªr de vouloir continuer ?</p>
                <div class="modal-footer">
                    <button class="btn-secondary" onclick="closeRestoreModal()">Annuler</button>
                    <button class="btn-primary" style="background-color: #ef4444;" onclick="confirmRestore()">Restaurer
                        maintenant</button>
                </div>
            </div>
        </div>
    </div>

    <div id="notification-toast" class="notification-toast"></div>

    <div style="position: fixed; bottom: 10px; right: 10px; z-index: 9999;">
        <button onclick="resetApp()"
            style="background: rgba(255, 255, 255, 0.9); border: 1px solid #ccc; padding: 10px 15px; border-radius: 5px; cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.2); font-family: sans-serif; font-size: 12px; color: #333;">
            ‚ö†Ô∏è Probl√®me d'affichage ? R√©initialiser
        </button>
    </div>

    <!-- Security Modules (load in order) -->
    <script src="./js/sanitizer.js"></script>
    <script src="./js/security.js"></script>
    <script src="./js/csrf-protection.js"></script>
    <script src="./js/monitoring.js"></script>
    <script src="./js/security-init.js"></script>

    <!-- Application Scripts -->
    <script src="./js/backup-restore.js?v=14"></script>
    <script src="./js/admin-dashboard.js?v=40"></script>
</body>

</html>